import{d as R,f as w,E as C,c as r,o,g as e,h as i,q,t as u,m as f,_ as N,u as H,r as v,e as U,G as P,w as I,s as Q,H as E,i as L,l as V,a as $,F as j,k as F,J as W,p as G}from"./index-uAGtHsti.js";const J={class:"flex items-start gap-4"},K={class:"flex-shrink-0 mt-1"},Y={class:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},O=["d"],X={class:"flex-1 min-w-0"},Z={class:"text-lg font-semibold text-white mb-2 line-clamp-2"},ee={class:"text-gray-300 text-sm mb-3 line-clamp-3"},te={class:"flex flex-wrap items-center gap-4 text-xs text-gray-400"},se={class:"px-2 py-1 bg-gray-700 rounded-md font-medium"},ae={key:0,class:"flex items-center gap-1"},oe={key:1,class:"flex items-center gap-1"},re={key:2,class:"flex items-center gap-1"},le={key:3,class:"flex items-center gap-1"},ne={key:4,class:"flex items-center gap-3"},ie={key:0,class:"flex items-center gap-1"},ue={key:1,class:"flex items-center gap-1"},de={key:5,class:"flex items-center gap-1 text-primary-400"},ce={key:0,class:"flex-shrink-0 mt-1"},pe=R({__name:"SearchResultCard",props:{result:{}},emits:["click"],setup(z,{emit:S}){const h=z,p=S,s=w(()=>C.formatResult(h.result)),d=w(()=>h.result.url.startsWith("http")),x=w(()=>({article:"bg-blue-600/20 text-blue-400",video:"bg-red-600/20 text-red-400",faq:"bg-green-600/20 text-green-400",user:"bg-purple-600/20 text-purple-400",comment:"bg-yellow-600/20 text-yellow-400"})[h.result.type]||"bg-gray-600/20 text-gray-400"),k=w(()=>({article:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z",video:"M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z",faq:"M8.228 9c.549-1.165 2.03-2 3.772-2 2.21 0 4 1.343 4 3 0 1.4-1.278 2.575-3.006 2.907-.542.104-.994.54-.994 1.093m0 3h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z",user:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z",comment:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})[h.result.type]||"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"),y=()=>{p("click",h.result)},b=a=>{const n=new Date(a),g=Math.floor((new Date().getTime()-n.getTime())/(1e3*60*60*24));if(g===0)return"Today";if(g===1)return"Yesterday";if(g<7)return`${g} days ago`;if(g<30){const M=Math.floor(g/7);return`${M} week${M>1?"s":""} ago`}else return n.toLocaleDateString()},_=a=>a>=1e6?(a/1e6).toFixed(1)+"M":a>=1e3?(a/1e3).toFixed(1)+"K":a.toString();return(a,n)=>(o(),r("div",{onClick:y,class:"bg-gray-800/50 hover:bg-gray-800/70 border border-gray-700 hover:border-gray-600 rounded-lg p-6 cursor-pointer transition-all duration-200 hover:shadow-lg"},[e("div",J,[e("div",K,[e("div",{class:q(["w-8 h-8 rounded-lg flex items-center justify-center",x.value])},[(o(),r("svg",Y,[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:k.value},null,8,O)]))],2)]),e("div",X,[e("h3",Z,u(s.value.title),1),e("p",ee,u(s.value.description),1),e("div",te,[e("span",se,u(s.value.type),1),s.value.metadata.author?(o(),r("span",ae,[n[0]||(n[0]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})],-1)),f(" "+u(s.value.metadata.author),1)])):i("",!0),s.value.metadata.category?(o(),r("span",oe,[n[1]||(n[1]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})],-1)),f(" "+u(s.value.metadata.category),1)])):i("",!0),s.value.metadata.published_at||s.value.metadata.created_at?(o(),r("span",re,[n[2]||(n[2]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),f(" "+u(b(s.value.metadata.published_at||s.value.metadata.created_at)),1)])):i("",!0),s.value.metadata.read_time?(o(),r("span",le,[n[3]||(n[3]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})],-1)),f(" "+u(s.value.metadata.read_time)+" min read ",1)])):i("",!0),a.result.type==="video"?(o(),r("div",ne,[s.value.metadata.views_count?(o(),r("span",ie,[n[4]||(n[4]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})],-1)),f(" "+u(_(s.value.metadata.views_count))+" views ",1)])):i("",!0),s.value.metadata.likes_count?(o(),r("span",ue,[n[5]||(n[5]=e("svg",{class:"w-3 h-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M4.318 6.318a4.5 4.5 0 000 6.364L12 20.364l7.682-7.682a4.5 4.5 0 00-6.364-6.364L12 7.636l-1.318-1.318a4.5 4.5 0 00-6.364 0z"})],-1)),f(" "+u(_(s.value.metadata.likes_count)),1)])):i("",!0)])):i("",!0),s.value.metadata.is_pinned?(o(),r("span",de,[...n[6]||(n[6]=[e("svg",{class:"w-3 h-3",fill:"currentColor",viewBox:"0 0 24 24"},[e("path",{d:"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"})],-1),f(" Pinned ",-1)])])):i("",!0)])]),d.value?(o(),r("div",ce,[...n[7]||(n[7]=[e("svg",{class:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24"},[e("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14"})],-1)])])):i("",!0)])]))}}),ve=N(pe,[["__scopeId","data-v-079db8bb"]]),he={class:"min-h-screen bg-gray-900"},me={class:"bg-gray-800/50 border-b border-gray-700"},ge={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6"},fe={class:"flex flex-col lg:flex-row gap-6"},ye={class:"flex-1"},xe={class:"flex flex-wrap gap-4 items-center"},ke={class:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8"},_e={key:0},we={class:"mb-6"},be={class:"text-gray-400"},Me={key:0,class:"ml-2 text-primary-500"},Ce={key:0,class:"flex justify-center py-12"},Se={key:1,class:"text-center py-12"},$e={key:2,class:"space-y-4"},ze={key:3,class:"mt-8 text-center"},Be=["disabled"],Le={key:0},Ve={key:1},je={key:1,class:"text-center py-12"},Fe={key:0,class:"max-w-2xl mx-auto"},Re={class:"flex flex-wrap gap-2 justify-center"},Ae=["onClick"],qe=R({__name:"SearchView",setup(z){const S=G(),h=P();H({title:"Search - Stargate.ci",meta:[{name:"description",content:"Search articles, videos, FAQs, and more on Stargate.ci platform"}]});const p=v(),s=v(""),d=v([]),x=v(0),k=v(!1),y=v(!1),b=v(!1),_=v([]),a=v({type:"all",sort:"relevance",category:"",author:"",date_from:"",date_to:""}),n=w(()=>d.value.length<x.value),m=async t=>{if(t.trim()){s.value=t,k.value=!0,b.value=!0,d.value=[];try{const l=await C.search(t,{type:a.value.type,sort:a.value.sort,category:a.value.category,author:a.value.author,date_from:a.value.date_from,date_to:a.value.date_to,limit:20,page:1});d.value=l.data.results||[],x.value=l.data.total||0}catch(l){console.error("Search failed:",l),d.value=[],x.value=0}finally{k.value=!1}}},g=t=>{m(t)},M=t=>{t.url.startsWith("/")?S.push(t.url):window.open(t.url,"_blank")},A=t=>{p.value&&p.value.setQuery(t),m(t)},B=()=>{s.value&&m(s.value)},T=()=>{a.value={type:"all",sort:"relevance",category:"",author:"",date_from:"",date_to:""},s.value&&m(s.value)},D=async()=>{if(!(!s.value||y.value)){y.value=!0;try{const t=await C.search(s.value,{type:a.value.type,sort:a.value.sort,category:a.value.category,author:a.value.author,date_from:a.value.date_from,date_to:a.value.date_to,limit:20,page:Math.floor(d.value.length/20)+1});d.value=[...d.value,...t.data.results||[]]}catch(t){console.error("Load more failed:",t)}finally{y.value=!1}}};return U(async()=>{try{_.value=await C.getPopularSearches();const t=h.query.q;t&&(s.value=t,p.value&&p.value.setQuery(t),m(t))}catch(t){console.error("Failed to load popular searches:",t)}}),I(()=>h.query.q,t=>{t&&typeof t=="string"&&(s.value=t,p.value&&p.value.setQuery(t),m(t))}),(t,l)=>(o(),r("div",he,[e("div",me,[e("div",ge,[e("div",fe,[e("div",ye,[Q(E,{ref_key:"searchBoxRef",ref:p,placeholder:"Search articles, videos, FAQs, users...","auto-focus":!0,onSearch:m,onSuggestionSelect:g},null,512)]),e("div",xe,[L(e("select",{"onUpdate:modelValue":l[0]||(l[0]=c=>a.value.type=c),onChange:B,class:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"},[...l[2]||(l[2]=[$('<option value="all">All Types</option><option value="articles">Articles</option><option value="videos">Videos</option><option value="faqs">FAQs</option><option value="users">Users</option><option value="comments">Comments</option>',6)])],544),[[V,a.value.type]]),L(e("select",{"onUpdate:modelValue":l[1]||(l[1]=c=>a.value.sort=c),onChange:B,class:"px-3 py-2 bg-gray-700 border border-gray-600 rounded-lg text-white text-sm focus:outline-none focus:ring-2 focus:ring-primary-500"},[...l[3]||(l[3]=[e("option",{value:"relevance"},"Relevance",-1),e("option",{value:"date"},"Date",-1),e("option",{value:"title"},"Title",-1),e("option",{value:"author"},"Author",-1)])],544),[[V,a.value.sort]]),e("button",{onClick:T,class:"px-3 py-2 text-gray-400 hover:text-white text-sm transition-colors"}," Clear Filters ")])])])]),e("div",ke,[b.value?(o(),r("div",_e,[e("div",we,[l[4]||(l[4]=e("h1",{class:"text-2xl font-bold text-white mb-2"}," Search Results ",-1)),e("p",be,[f(u(x.value)+' results for "'+u(s.value)+'" ',1),k.value?(o(),r("span",Me,"Searching...")):i("",!0)])]),k.value?(o(),r("div",Ce,[...l[5]||(l[5]=[e("div",{class:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-500"},null,-1)])])):d.value.length===0?(o(),r("div",Se,[...l[6]||(l[6]=[$('<div class="text-gray-400 mb-4"><svg class="mx-auto h-12 w-12" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><h3 class="text-lg font-medium text-white mb-2">No results found</h3><p class="text-gray-400 mb-4">Try different keywords or check your spelling</p><div class="text-sm text-gray-500"><p>Search tips:</p><ul class="list-disc list-inside mt-2 space-y-1"><li>Use more general keywords</li><li>Check your spelling</li><li>Try different search terms</li><li>Use fewer filters</li></ul></div>',4)])])):(o(),r("div",$e,[(o(!0),r(j,null,F(d.value,c=>(o(),W(ve,{key:`${c.type}-${c.id}`,result:c,onClick:M},null,8,["result"]))),128))])),n.value?(o(),r("div",ze,[e("button",{onClick:D,disabled:y.value,class:"px-6 py-3 bg-primary-600 hover:bg-primary-700 disabled:bg-gray-600 text-white rounded-lg font-medium transition-colors"},[y.value?(o(),r("span",Le,"Loading...")):(o(),r("span",Ve,"Load More Results"))],8,Be)])):i("",!0)])):(o(),r("div",je,[l[8]||(l[8]=$('<div class="text-gray-400 mb-4"><svg class="mx-auto h-16 w-16" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path></svg></div><h2 class="text-2xl font-bold text-white mb-4">Search Stargate.ci</h2><p class="text-gray-400 mb-8 max-w-2xl mx-auto"> Find articles, videos, FAQs, and more across our platform. Use the search box above to get started. </p>',3)),_.value.length>0?(o(),r("div",Fe,[l[7]||(l[7]=e("h3",{class:"text-lg font-medium text-white mb-4"},"Popular Searches",-1)),e("div",Re,[(o(!0),r(j,null,F(_.value.slice(0,8),c=>(o(),r("button",{key:c,onClick:Te=>A(c),class:"px-4 py-2 bg-gray-800 hover:bg-gray-700 text-gray-300 hover:text-white rounded-lg text-sm transition-colors"},u(c),9,Ae))),128))])])):i("",!0)]))])]))}});export{qe as default};
